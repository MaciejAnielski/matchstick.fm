<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Matchstick FM — Pirate Radio</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="header">
    <img src="logo.png" alt="Matchstick FM logo" />
    <h1>Matchstick FM</h1>
  </header>

  <div class="schedule">LIVE EVERY FRIDAY · 16:00–18:00 (UK)</div>

  <main class="wrap">
    <div class="grid">
      <section class="panel" id="player">
        <h2>Player</h2>
        <div class="controls">
          <button class="btn" id="toggle">Play / Stop</button>
          <div>
            <div id="np" style="font-weight:900;">Now Playing: —</div>
            <div class="row"><span id="status">Offline</span><span>192kbps</span></div>
          </div>
        </div>
        <input type="range" id="progress" class="bar" value="0" min="0" max="100" />
        <div class="row"><span id="elapsed">00:00</span><span id="remain">00:00</span></div>
        <audio id="audio" preload="none"></audio>
      </section>

      <aside class="panel" id="chat">
        <h2>Live Chat</h2>
        <div class="chatlog" id="chatlog" aria-live="polite">
          <div class="msg"><span class="nick">User1:</span> Hello everyone!</div>
          <div class="msg"><span class="nick">User2:</span> Hi, how's it going?</div>
          <div class="msg"><span class="nick">User3:</span> Greetings from London.</div>
          <div class="msg"><span class="nick">User4:</span> Hey folks!</div>
        </div>
        <div class="chatinput">
          <input id="chattext" type="text" placeholder="Type here..." />
          <button class="btn" id="send">Send</button>
        </div>
      </aside>
    </div>

    <div class="foot">© 2025 Matchstick FM</div>
  </main>

  <script>
    const btn = document.getElementById('toggle');
    const statusEl = document.getElementById('status');
    const np = document.getElementById('np');
    const progress = document.getElementById('progress');
    const elapsed = document.getElementById('elapsed');
    const remain = document.getElementById('remain');
    let playing = false, pos = 0, dur = 180, timer = null;
    function fmt(t){
      const m = String(Math.floor(t/60)).padStart(2,'0');
      const s = String(Math.floor(t%60)).padStart(2,'0');
      return m+':'+s;
    }
    function tick(){
      pos = Math.min(pos+1, dur);
      progress.value = Math.round(pos/dur*100);
      elapsed.textContent = fmt(pos);
      remain.textContent  = fmt(Math.max(dur-pos, 0));
      if (pos >= dur) stop();
    }
    function start(){
      playing = true;
      statusEl.textContent = 'Playing';
      np.textContent = 'Now Playing: Matchstick FM — Demo Loop';
      timer = setInterval(tick, 1000);
    }
    function stop(){
      playing = false;
      statusEl.textContent = 'Paused';
      clearInterval(timer); timer = null;
    }
    btn.addEventListener('click', () => playing ? stop() : start());
    progress.addEventListener('input', e => {
      pos = Math.round((e.target.value/100)*dur);
      elapsed.textContent = fmt(pos);
      remain.textContent  = fmt(Math.max(dur-pos, 0));
    });

    const log = document.getElementById('chatlog');
    const txt = document.getElementById('chattext');
    const send = document.getElementById('send');
    function addMsg(nick, text){
      const row = document.createElement('div');
      row.className = 'msg';
      const n = document.createElement('span'); n.className = 'nick'; n.textContent = nick + ':';
      const t = document.createTextNode(' ' + text);
      row.appendChild(n); row.appendChild(t);
      log.appendChild(row);
      log.scrollTop = log.scrollHeight;
    }
    function sendMsg(){
      const v = txt.value.trim();
      if (!v) return;
      addMsg('You', v);
      txt.value='';
    }
    send.addEventListener('click', sendMsg);
    txt.addEventListener('keydown', e => { if (e.key === 'Enter') sendMsg(); });
  </script>
</body>
</html>
